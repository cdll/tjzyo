(function(c,b){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=c.document?b(c,true):function(d){if(!d.document){throw new Error("Avalon requires a window with a document")}return b(d)}}else{b(c)}}(typeof window!=="undefined"?window:this,function(bs,aB){var ai=Date.now();var bK=bs.document;var b=bK.head;b.insertAdjacentHTML("afterBegin",'<avalon ms-skip class="avalonHide"><style id="avalonStyle">.avalonHide{ display: none!important }</style></avalon>');var ac=b.firstChild;function bE(){if(avalon.config.debug){console.log.apply(console,arguments)}}function p(){return Object.create(null)}var bP="$"+ai;var V=bs.require;var U=bs.define;var B=false;var bf=/[^, ]+/g;var v=/^(?:object|array)$/;var Y=/^\[object SVG\w*Element\]$/;var z=/^\[object (?:Window|DOMWindow|global)\]$/;var aW=Object.prototype;var bv=aW.hasOwnProperty;var bL=aW.toString;var bX=Array.prototype;var J=bX.slice;var bj={};var au=bs.dispatchEvent;var b6=bK.documentElement;var bA=bK.createDocumentFragment();var ci=bK.createElement("div");var ah={};"Boolean Number String Function Array Date RegExp Object Error".replace(bf,function(ap){ah["[object "+ap+"]"]=ap.toLowerCase()});function h(){}function cl(cu,cs){if(typeof cu==="string"){cu=cu.match(bf)||[]}var ap={},cr=cs!==void 0?cs:1;for(var cq=0,ct=cu.length;cq<ct;cq++){ap[cu[cq]]=cr}return ap}var a5=function(ap){ap=ap||"avalon";return(ap+Math.random()+Math.random()).replace(/0\./g,"")};function b9(){if(bs.VBArray){var ap=document.documentMode;return ap?ap:bs.XMLHttpRequest?7:6}else{return 0}}var bm=b9();avalon=function(ap){return new avalon.init(ap)};avalon.nextTick=new function(){var cr=bs.setImmediate;var cq=bs.MutationObserver;var ct=au&&bs.postMessage;if(cr){return cr.bind(bs)}var ap=[];function cu(){var cw=ap.length;for(var cv=0;cv<cw;cv++){ap[cv]()}ap=ap.slice(cw)}if(cq){var cs=document.createTextNode("avalon");new cq(cu).observe(cs,{characterData:true});return function(cv){ap.push(cv);cs.data=Math.random()}}if(ct){bs.addEventListener("message",function(cw){var cv=cw.source;if((cv===bs||cv===null)&&cw.data==="process-tick"){cw.stopPropagation();cu()}});return function(cv){ap.push(cv);bs.postMessage("process-tick","*")}}return function(cv){setTimeout(cv,0)}};avalon.init=function(ap){this[0]=this.element=ap};avalon.fn=avalon.prototype=avalon.init.prototype;avalon.type=function(ap){if(ap==null){return String(ap)}return typeof ap==="object"||typeof ap==="function"?ah[bL.call(ap)]||"object":typeof ap};var x=function(ap){return bL.call(ap)==="[object Function]"};avalon.isFunction=x;avalon.isWindow=function(ap){return z.test(bL.call(ap))};avalon.isPlainObject=function(ap){return bL.call(ap)==="[object Object]"&&Object.getPrototypeOf(ap)===aW};avalon.mix=avalon.fn.mix=function(){var cy,cr,ap,cq,cv,cw,cu=arguments[0]||{},ct=1,cs=arguments.length,cx=false;if(typeof cu==="boolean"){cx=cu;cu=arguments[1]||{};ct++}if(typeof cu!=="object"&&!x(cu)){cu={}}if(ct===cs){cu=this;ct--}for(;ct<cs;ct++){if((cy=arguments[ct])!=null){for(cr in cy){ap=cu[cr];cq=cy[cr];if(cu===cq){continue}if(cx&&cq&&(avalon.isPlainObject(cq)||(cv=Array.isArray(cq)))){if(cv){cv=false;cw=ap&&Array.isArray(ap)?ap:[]}else{cw=ap&&avalon.isPlainObject(ap)?ap:{}}cu[cr]=avalon.mix(cx,cw,cq)}else{if(cq!==void 0){cu[cr]=cq}}}}}return cu};function aM(cq,ap){cq=Math.floor(cq)||0;return cq<0?Math.max(ap+cq,0):Math.min(cq,ap)}avalon.mix({rword:bf,subscribers:bP,version:1.41,ui:{},log:bE,slice:function(cq,cr,ap){return J.call(cq,cr,ap)},noop:h,error:function(cq,ap){throw new (ap||Error)(cq)},oneObject:cl,range:function(cu,cq,ct){ct||(ct=1);if(cq==null){cq=cu||0;cu=0}var cr=-1,cs=Math.max(0,Math.ceil((cq-cu)/ct)),ap=new Array(cs);while(++cr<cs){ap[cr]=cu;cu+=ct}return ap},eventHooks:{},bind:function(ct,cs,cr,cq){var ap=avalon.eventHooks;var cu=ap[cs];if(typeof cu==="object"){cs=cu.type;if(cu.deel){cr=cu.deel(ct,cs,cr,cq)}}if(!cr.unbind){ct.addEventListener(cs,cr,!!cq)}return cr},unbind:function(ct,cs,cr,cq){var ap=avalon.eventHooks;var cu=ap[cs];var cv=cr||h;if(typeof cu==="object"){cs=cu.type;if(cu.deel){cr=cu.deel(ct,cs,cr,false)}}ct.removeEventListener(cs,cv,!!cq)},css:function(cr,ap,cs){if(cr instanceof avalon){cr=cr[0]}var cu=/[_-]/.test(ap)?k(ap):ap,cq;ap=avalon.cssName(cu)||cu;if(cs===void 0||typeof cs==="boolean"){cq=r[cu+":get"]||r["@:get"];if(ap==="background"){ap="backgroundColor"}var ct=cq(cr,ap);return cs===true?parseFloat(ct)||0:ct}else{if(cs===""){cr.style[ap]=""}else{if(cs==null||cs!==cs){return}if(isFinite(cs)&&!avalon.cssNumber[cu]){cs+="px"}cq=r[cu+":set"]||r["@:set"];cq(cr,ap,cs)}}},each:function(cr,cq){if(cr){var ap=0;if(az(cr)){for(var cs=cr.length;ap<cs;ap++){if(cq(ap,cr[ap])===false){break}}}else{for(ap in cr){if(cr.hasOwnProperty(ap)&&cq(ap,cr[ap])===false){break}}}}},getWidgetData:function(cs,ct){var cq=avalon(cs).data();var ap={};for(var cr in cq){if(cr.indexOf(ct)===0){ap[cr.replace(ct,"").replace(/\w/,function(cu){return cu.toLowerCase()})]=cq[cr]}}return ap},Array:{ensure:function(cq,ap){if(cq.indexOf(ap)===-1){return cq.push(ap)}},removeAt:function(cq,ap){return !!cq.splice(ap,1).length},remove:function(cr,cq){var ap=cr.indexOf(cq);if(~ap){return avalon.Array.removeAt(cr,ap)}return false}}});var ck=avalon.bindingHandlers={};var S=avalon.bindingExecutors={};function az(ap){if(ap&&typeof ap==="object"){var cr=ap.length,cq=bL.call(ap);if(/(Array|List|Collection|Map|Arguments)\]$/.test(cq)){return true}else{if(cq==="[object Object]"&&cr===(cr>>>0)){return true}}}return false}var f=new function(){function ap(cr){this.size=0;this.limit=cr;this.head=this.tail=void 0;this._keymap={}}var cq=ap.prototype;cq.put=function(cr,ct){var cs={key:cr,value:ct};this._keymap[cr]=cs;if(this.tail){this.tail.newer=cs;cs.older=this.tail}else{this.head=cs}this.tail=cs;if(this.size===this.limit){this.shift()}else{this.size++}return ct};cq.shift=function(){var cr=this.head;if(cr){this.head=this.head.newer;this.head.older=cr.newer=cr.older=this._keymap[cr.key]=void 0}};cq.get=function(cr){var cs=this._keymap[cr];if(cs===void 0){return}if(cs===this.tail){return cs.value}if(cs.newer){if(cs===this.head){this.head=cs.newer}cs.newer.older=cs.older}if(cs.older){cs.older.newer=cs.newer}cs.newer=void 0;cs.older=this.tail;if(this.tail){this.tail.newer=cs}this.tail=cs;return cs.value};return ap};if(!b6.contains){Node.prototype.contains=function(ap){return !!(this.compareDocumentPosition(ap)&16)}}avalon.contains=function(ap,cq){try{while((cq=cq.parentNode)){if(cq===ap){return true}}return false}catch(cr){return false}};if(bs.SVGElement){var aN="http://www.w3.org/2000/svg";var bc=bK.createElementNS(aN,"svg");bc.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />';if(!Y.test(bc.firstChild)){function bl(ct,cu){if(ct&&ct.childNodes){var cq=ct.childNodes;for(var cr=0,cs;cs=cq[cr++];){if(cs.tagName){var ap=bK.createElementNS(aN,cs.tagName.toLowerCase());bX.forEach.call(cs.attributes,function(cv){ap.setAttribute(cv.name,cv.value)});bl(cs,ap);cu.appendChild(ap)}}}}Object.defineProperties(SVGElement.prototype,{"outerHTML":{enumerable:true,configurable:true,get:function(){return new XMLSerializer().serializeToString(this)},set:function(cq){var ap=this.tagName.toLowerCase(),cr=this.parentNode,ct=avalon.parseHTML(cq);if(ap==="svg"){cr.insertBefore(ct,this)}else{var cs=bK.createDocumentFragment();bl(ct,cs);cr.insertBefore(cs,this)}cr.removeChild(this)}},"innerHTML":{enumerable:true,configurable:true,get:function(){var cq=this.outerHTML;var ap=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i");var cr=new RegExp("</"+this.nodeName+">$","i");return cq.replace(ap,"").replace(cr,"")},set:function(ap){if(avalon.clearHTML){avalon.clearHTML(this);var cq=avalon.parseHTML(ap);bl(cq,this)}}}})}}var aX=avalon.eventHooks;if(!("onmouseenter" in b6)){avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(cq,ap){aX[cq]={type:ap,deel:function(ct,cr,cs){return function(cv){var cu=cv.relatedTarget;if(!cu||(cu!==ct&&!(ct.compareDocumentPosition(cu)&16))){delete cv.type;cv.type=cq;return cs.call(ct,cv)}}}}})}avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(ap,cq){if(bs[ap]&&!aX.animationend){aX.animationend={type:cq}}});if(bK.onmousewheel===void 0){aX.mousewheel={type:"wheel",deel:function(cr,ap,cq){return function(cs){cs.wheelDeltaY=cs.wheelDelta=cs.deltaY>0?-120:120;cs.wheelDeltaX=0;Object.defineProperty(cs,"type",{value:"mousewheel"});cq.call(cr,cs)}}}}function Z(ap){for(var cq in ap){if(!bv.call(ap,cq)){continue}var cr=ap[cq];if(typeof Z.plugins[cq]==="function"){Z.plugins[cq](cr)}else{if(typeof Z[cq]==="object"){avalon.mix(Z[cq],cr)}else{Z[cq]=cr}}}return this}var bM,aT,T,am,aH,L=/[-.*+?^${}()|[\]\/\\]/g;function bu(ap){return(ap+"").replace(L,"\\$&")}var o=h;var cp={loader:function(ap){bs.define=ap?o.define:U;bs.require=ap?o:V},interpolate:function(cs){bM=cs[0];aT=cs[1];if(bM===aT){throw new SyntaxError("openTag!==closeTag")}else{if(cs+""==="<!--,-->"){Z.commentInterpolate=true}else{var cr=bM+"test"+aT;ci.innerHTML=cr;if(ci.innerHTML!==cr&&ci.innerHTML.indexOf("&lt;")>-1){throw new SyntaxError("此定界符不合法")}ci.innerHTML=""}}var ap=bu(bM),cq=bu(aT);T=new RegExp(ap+"(.*?)"+cq);am=new RegExp(ap+"(.*?)"+cq,"g");aH=new RegExp(ap+".*?"+cq+"|\\sms-")}};Z.debug=true;Z.plugins=cp;Z.plugins["interpolate"](["{{","}}"]);Z.paths={};Z.shim={};Z.maxRepeatSize=100;avalon.config=Z;var cb=/(\w+)\[(avalonctrl)="(\S+)"\]/;var bC=function(ap){return bK.querySelectorAll(ap)};var bR={$watch:function(ap,cr){if(typeof cr==="function"){var cq=this.$events[ap];if(cq){cq.push(cr)}else{this.$events[ap]=[cr]}}else{this.$events=this.$watch.backup}return this},$unwatch:function(cq,ct){var cs=arguments.length;if(cs===0){this.$watch.backup=this.$events;this.$events={}}else{if(cs===1){this.$events[cq]=[]}else{var cr=this.$events[cq]||[];var ap=cr.length;while(~--ap<0){if(cr[ap]===ct){return cr.splice(ap,1)}}}}return this},$fire:function(cy){var cw,cr,cA,cB;if(/^(\w+)!(\S+)$/.test(cy)){cw=RegExp.$1;cy=RegExp.$2}var cC=this.$events;if(!cC){return}var cx=J.call(arguments,1);var cs=[cy].concat(cx);if(cw==="all"){for(cr in avalon.vmodels){cA=avalon.vmodels[cr];if(cA!==this){cA.$fire.apply(cA,cs)}}}else{if(cw==="up"||cw==="down"){var ap=cC.expr?bC(cC.expr):[];if(ap.length===0){return}for(cr in avalon.vmodels){cA=avalon.vmodels[cr];if(cA!==this){if(cA.$events.expr){var ct=bC(cA.$events.expr);if(ct.length===0){continue}Array.prototype.forEach.call(ct,function(cD){Array.prototype.forEach.call(ap,function(cF){var cE=cw==="down"?cF.contains(cD):cD.contains(cF);if(cE){cD._avalon=cA}})})}}}var cq=bK.getElementsByTagName("*");var cv=[];Array.prototype.forEach.call(cq,function(cD){if(cD._avalon){cv.push(cD._avalon);cD._avalon="";cD.removeAttribute("_avalon")}});if(cw==="up"){cv.reverse()}for(cr=0;cB=cv[cr++];){if(cB.$fire.apply(cB,cs)===false){break}}}else{var cu=cC[cy]||[];var cz=cC.$all||[];for(cr=0;cB=cu[cr++];){if(x(cB)){cB.apply(this,cx)}}for(cr=0;cB=cz[cr++];){if(x(cB)){cB.apply(this,arguments)}}}}}};var b4=avalon.vmodels=p();avalon.define=function(ct,ap){var cs=ct.$id||ct;if(!cs){bE("warning: vm必须指定$id")}if(b4[cs]){bE("warning: "+cs+" 已经存在于avalon.vmodels中")}if(typeof ct==="object"){var cq=bB(ct)}else{var cr={$watch:h};ap(cr);cq=bB(cr);B=true;ap(cq);B=false}cq.$id=cs;return b4[cs]=cq};var bn=String("$id,$watch,$unwatch,$fire,$events,$model,$skipArray").match(bf);function bO(cr,cs,cq){if(x(cs)||cs&&cs.nodeType){return false}if(cq.indexOf(cr)!==-1){return false}if(bn.indexOf(cr)!==-1){return false}var ap=cq.$special;if(cr&&cr.charAt(0)==="$"&&!ap[cr]){return false}return true}var ao=p();function bq(ct,ap,cx,cr){switch(ct.type){case 0:var cv=ct.get;var cs=ct.set;if(x(cs)){var cu=cr.$events;var cy=cu[ap];cu[ap]=[];cs.call(cr,cx);cu[ap]=cy}return cv.call(cr);case 1:return cx;case 2:if(cx!==cr.$model[ap]){var cq=ct.svmodel=bi(cr,ap,cx,ct.valueType);cx=cq.$model;var cw=ao[cq.$id];cw&&cw()}return cx}}function bB(ap,cr,cu){if(Array.isArray(ap)){var cv=ap.concat();ap.length=0;var cw=ae(ap);cw.pushArray(cv);return cw}if(!ap||ap.nodeType>0||(ap.$id&&ap.$events)){return ap}if(!Array.isArray(ap.$skipArray)){ap.$skipArray=[]}ap.$skipArray.$special=cr||p();var cs={};cu=cu||{};var cx=p();var cy=p();var cz=[];for(var ct in ap){(function(cB,cC){cu[cB]=cC;if(!bO(cB,cC,ap.$skipArray)){return}cx[cB]=[];var cD=avalon.type(cC);var cA=function(cJ){var cH=cA._name;var cF=this;var cE=cF.$model;var cG=cE[cH];var cI=cF.$events;if(arguments.length){if(B){return}if(cA.type!==1){cJ=bq(cA,cH,cJ,cF);if(!cA.type){return}}if(!bd(cG,cJ)){cE[cH]=cJ;bW(cI[cH]);aG(cF,cH,cJ,cG)}}else{if(cA.type===0){cJ=cA.get.call(cF);if(cG!==cJ){cE[cH]=cJ;aG(cF,cH,cJ,cG)}return cJ}else{aV(cI[cH]);return cA.svmodel||cG}}};if(cD==="object"&&x(cC.get)&&Object.keys(cC).length<=2){cA.set=cC.set;cA.get=cC.get;cA.type=0;cz.push(function(){var cE={evaluator:function(){cE.type=Math.random(),cE.element=null;cu[cB]=cA.get.call(cs)},element:b,type:Math.random(),handler:h,args:[]};bj[ai]=cE;cA.call(cs);delete bj[ai]})}else{if(v.test(cD)){cA.type=2;cA.valueType=cD;cz.push(function(){var cE=bB(cC,0,cu[cB]);cA.svmodel=cE;cE.$events[bP]=cx[cB]})}else{cA.type=1}}cA._name=cB;cy[cB]=cA})(ct,ap[ct])}bn.forEach(function(cA){delete ap[cA];delete cu[cA]});cs=Object.defineProperties(cs,F(cy),ap);for(var cq in ap){if(!cy[cq]){cs[cq]=ap[cq]}}cs.$id=a5();cs.$model=cu;cs.$events=cx;for(ct in bR){cs[ct]=bR[ct]}Object.defineProperty(cs,"hasOwnProperty",{value:function(cA){return cA in this.$model},writable:false,enumerable:false,configurable:true});cz.forEach(function(cA){cA()});return cs}var bd=Object.is||function(cq,ap){if(cq===0&&ap===0){return 1/cq===1/ap}else{if(cq!==cq){return ap!==ap}else{return cq===ap}}};function aG(cq,ap,cs,cr){if(cq.$events){bR.$fire.call(cq,ap,cs,cr)}}var F=function(cr){var cq=p();for(var ap in cr){cq[ap]={get:cr[ap],set:cr[ap],enumerable:true,configurable:true}}return cq};function bi(cu,cr,cv,cw){var cq=cu[cr];if(cw==="array"){if(!Array.isArray(cv)||cq===cv){return cq}cq._.$unwatch();cq.clear();cq._.$watch();cq.pushArray(cv.concat());return cq}else{var ct=cu.$events[cr];var cs=cq.$events.$withProxyPool;if(cs){E(cs,"with");cq.$events.$withProxyPool=null}var ap=bB(cv);ap.$events[bP]=ct;ao[ap.$id]=function(cx){while(cx=ct.shift()){(function(cy){avalon.nextTick(function(){var cz=cy.type;if(cz&&ck[cz]){cy.rollback&&cy.rollback();ck[cz](cy,cy.vmodels)}})})(cx)}delete ao[ap.$id]};return ap}}function ae(ap){var cr=[];cr.$id=a5();cr.$model=ap;cr.$events={};cr.$events[bP]=[];cr._=bB({length:ap.length});cr._.$watch("length",function(ct,cs){cr.$fire("length",ct,cs)});for(var cq in bR){cr[cq]=bR[cq]}avalon.mix(cr,b5);return cr}function a8(ap,cy,cs,cv,cq,cz,cu){var cr=this.length,ct=2;while(--ct){switch(ap){case"add":var cx=this.$model.slice(cy,cy+cs).map(function(cA){if(v.test(avalon.type(cA))){return cA.$id?cA:bB(cA,0,cA)}else{return cA}});ba.apply(this,[cy,0].concat(cx));this._fire("add",cy,cs);break;case"del":var cw=this._splice(cy,cs);this._fire("del",cy,cs);break}if(cq){ap=cq;cy=cz;cs=cu;ct=2;cq=0}}this._fire("index",cv);if(this.length!==cr){this._.length=this.length}return cw}var ba=bX.splice;var b5={_splice:ba,_fire:function(cr,cq,ap){bW(this.$events[bP],cr,cq,ap)},size:function(){return this._.length},pushArray:function(cr){var ap=cr.length,cq=this.length;if(ap){bX.push.apply(this.$model,cr);a8.call(this,"add",cq,ap,cq)}return ap+cq},push:function(){var cr=[];var ap,cq=arguments.length;for(ap=0;ap<cq;ap++){cr[ap]=arguments[ap]}return this.pushArray(arguments)},unshift:function(){var ap=arguments.length,cq=this.length;if(ap){bX.unshift.apply(this.$model,arguments);a8.call(this,"add",0,ap,0)}return ap+cq},shift:function(){if(this.length){var ap=this.$model.shift();a8.call(this,"del",0,1,0);return ap}},pop:function(){var ap=this.length;if(ap){var cq=this.$model.pop();a8.call(this,"del",ap-1,1,Math.max(0,ap-2));return cq}},splice:function(ct){var ap=arguments.length,cq=[],cs;var cr=ba.apply(this.$model,arguments);if(cr.length){cq.push("del",ct,cr.length,0);cs=true}if(ap>2){if(cs){cq.splice(3,1,0,"add",ct,ap-2)}else{cq.push("add",ct,ap-2,0)}cs=true}if(cs){return a8.apply(this,cq)}else{return[]}},contains:function(ap){return this.indexOf(ap)!==-1},remove:function(ap){return this.removeAt(this.indexOf(ap))},removeAt:function(ap){if(ap>=0){this.$model.splice(ap,1);return a8.call(this,"del",ap,1,0)}return[]},clear:function(){this.$model.length=this.length=this._.length=0;this._fire("clear",0);return this},removeAll:function(cr){if(Array.isArray(cr)){cr.forEach(function(cs){this.remove(cs)},this)}else{if(typeof cr==="function"){for(var ap=this.length-1;ap>=0;ap--){var cq=this[ap];if(cr(cq,ap)){this.removeAt(ap)}}}else{this.clear()}}},ensure:function(ap){if(!this.contains(ap)){this.push(ap)}return this},set:function(ap,cs){if(ap>=0){var ct=avalon.type(cs);if(cs&&cs.$model){cs=cs.$model}var cr=this[ap];if(ct==="object"){for(var cq in cs){if(cr.hasOwnProperty(cq)){cr[cq]=cs[cq]}}}else{if(ct==="array"){cr.clear().push.apply(cr,cs)}else{if(cr!==cs){this[ap]=cs;this.$model[ap]=cs;this._fire("set",ap,cs)}}}}return this}};function aR(cu,cq){var cs={};for(var cr=0,ct=cq.length;cr<ct;cr++){cs[cr]=cu[cr];var ap=cq[cr];if(ap in cs){cu[cr]=cs[ap];delete cs[ap]}else{cu[cr]=cu[ap]}}}"sort,reverse".replace(bf,function(ap){b5[ap]=function(){var cw=this.$model;var cv=cw.concat();var cz=Math.random();var ct=[];var cy;bX[ap].apply(cw,arguments);for(var cs=0,cr=cv.length;cs<cr;cs++){var cx=cw[cs];var cq=cv[cs];if(bd(cx,cq)){ct.push(cs)}else{var cu=cv.indexOf(cx);ct.push(cu);cv[cu]=cz;cy=true}}if(cy){aR(this,ct);this._fire("move",ct);this._fire("index",0)}return this}});var bk=/^(duplex|on)$/;function e(cs){bj[ai]=cs;avalon.openComputedCollect=true;var cq=cs.evaluator;if(cq){try{var cu=bk.test(cs.type)?cs:cq.apply(0,cs.args);cs.handler(cu,cs.element,cs)}catch(ct){delete cs.evaluator;var cr=cs.element;if(cr.nodeType===3){var ap=cr.parentNode;if(Z.commentInterpolate){ap.replaceChild(bK.createComment(cs.value),cr)}else{cr.data=bM+cs.value+aT}}}}avalon.openComputedCollect=false;delete bj[ai]}function aV(cq){var ap=bj[ai];if(cq&&ap&&avalon.Array.ensure(cq,ap)&&ap.element){K(ap,cq)}}function K(cq,ap){cq.$uuid=cq.$uuid||a5();ap.$uuid=ap.$uuid||a5();var cr={data:cq,list:ap,$$uuid:cq.$uuid+ap.$uuid};if(!s[cr.$$uuid]){s[cr.$$uuid]=1;s.push(cr)}}function bg(cq){cq.element=null;cq.rollback&&cq.rollback();for(var ap in cq){cq[ap]=null}}function cn(ap){try{if(!ap.parentNode){return true}}catch(cq){return true}return ap.msRetain?0:(ap.nodeType===1?typeof ap.sourceIndex==="number"?ap.sourceIndex===0:!b6.contains(ap):!avalon.contains(b6,ap))}var s=avalon.$$subscribers=[];var bp=new Date();var al={};function bI(){var cu=s.length;var ap=cu;var cr=0;var cs;var cv=[];var cx={};var cq={};while(cs=s[--cu]){var ct=cs.data;var cw=ct.type;if(cx[cw]){cx[cw]++}else{cx[cw]=1;cv.push(cw)}}var cy=false;cv.forEach(function(cz){if(al[cz]!==cx[cz]){cq[cz]=1;cy=true}});cu=ap;if(cy){while(cs=s[--cu]){ct=cs.data;if(ct.element===void 0){continue}if(cq[ct.type]&&cn(ct.element)){cr++;s.splice(cu,1);delete s[cs.$$uuid];avalon.Array.remove(cs.list,ct);bg(ct);cs.data=cs.list=null}}}al=cx;bp=new Date()}function bW(cu){if(cu&&cu.length){if(new Date()-bp>444&&typeof cu[0]==="object"){bI()}var cq=J.call(arguments,1);for(var cr=cu.length,ct;ct=cu[--cr];){var cs=ct.element;if(cs&&cs.parentNode){if(ct.$repeat){ct.handler.apply(ct,cq)}else{if(ct.type!=="on"){var ap=ct.evaluator||h;ct.handler(ap.apply(0,ct.args||[]),cs,ct)}}}}}}var a1=new function(){avalon.mix(this,{option:bK.createElement("select"),thead:bK.createElement("table"),td:bK.createElement("tr"),area:bK.createElement("map"),tr:bK.createElement("tbody"),col:bK.createElement("colgroup"),legend:bK.createElement("fieldset"),_default:bK.createElement("div"),"g":bK.createElementNS("http://www.w3.org/2000/svg","svg")});this.optgroup=this.option;this.tbody=this.tfoot=this.colgroup=this.caption=this.thead;this.th=this.td};String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(bf,function(ap){a1[ap]=a1.g});var q=/<([\w:]+)/;var cc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig;var b2=cl(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);var a9=bK.createElement("script");avalon.parseHTML=function(ct){if(typeof ct!=="string"){return bK.createDocumentFragment()}ct=ct.replace(cc,"<$1></$2>").trim();var cx=(q.exec(ct)||["",""])[1].toLowerCase(),ap=a1[cx]||a1._default,cu=bA.cloneNode(false),cv;ap.innerHTML=ct;var cr=ap.getElementsByTagName("script");if(cr.length){for(var cs=0,cq;cq=cr[cs++];){if(b2[cq.type]){var cw=a9.cloneNode(false);bX.forEach.call(cq.attributes,function(cy){cw.setAttribute(cy.name,cy.value)});cw.text=cq.text;cq.parentNode.replaceChild(cw,cq)}}}while(cv=ap.firstChild){cu.appendChild(cv)}return cu};avalon.innerHTML=function(cr,cq){var ap=this.parseHTML(cq);this.clearHTML(cr).appendChild(ap)};avalon.clearHTML=function(ap){ap.textContent="";while(ap.firstChild){ap.removeChild(ap.firstChild)}return ap};avalon.scan=function(cq,cs,cr){cq=cq||b6;var ap=cs?[].concat(cs):[];a2(cq,ap)};var aI=cl("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase());function d(ap,cs,cr){var cq=setTimeout(function(){var ct=ap.innerHTML;clearTimeout(cq);if(ct===cr){cs()}else{d(ap,cs,ct)}})}function H(ap,cq){var cr=ap.getAttribute("avalonctrl")||cq.$id;ap.setAttribute("avalonctrl",cr);cq.$events.expr=ap.tagName+'[avalonctrl="'+cr+'"]'}var ay=function(ct,cq,ap){var cu=ct.getAttribute(cq);if(cu){for(var cr=0,cs;cs=ap[cr++];){if(cs.hasOwnProperty(cu)&&typeof cs[cu]==="function"){return cs[cu]}}}};function bV(cs,ap){for(var cq=0,cr;cr=cs[cq++];){cr.vmodels=ap;ck[cr.type](cr,ap);if(cr.evaluator&&cr.element&&cr.element.nodeType===1){cr.element.removeAttribute(cr.name)}}cs.length=0}var aE=bm&&bs.MutationObserver?function(cr){var cq=cr.firstChild,cs;while(cq){var ap=cq.nextSibling;if(cq.nodeType===3){if(cs){cs.nodeValue+=cq.nodeValue;cr.removeChild(cq)}else{cs=cq}}else{cs=null}cq=ap}}:0;var aC=/ms-(\w+)-?(.*)/;var G={"if":10,"repeat":90,"data":100,"widget":110,"each":1400,"with":1500,"duplex":2000,"on":3000};var ch=cl("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");var bJ=cl("value,title,alt,checked,selected,disabled,readonly,enabled");function C(cq,ap){return cq.priority-ap.priority}function br(cu,cr){var cw=cu.hasAttributes()?avalon.slice(cu.attributes):[];var cq=[],cs=p(),cy;for(var cx=0,cz;cz=cw[cx++];){if(cz.specified){if(cy=cz.name.match(aC)){var cB=cy[1];var ct=cy[2]||"";var cD=cz.value;var ap=cz.name;cs[ap]=cD;if(ch[cB]){ct=cB;cB="on"}else{if(bJ[cB]){bE("ms-"+cB+"已经被废弃,请使用ms-attr-*代替");if(cB==="enabled"){cB="disabled";cD="!("+cD+")"}ct=cB;cB="attr";cu.removeAttribute(ap);ap="ms-attr-"+ct;cu.setAttribute(ap,cD);cy=[ap];cs[ap]=cD}}if(typeof ck[cB]==="function"){var cA={type:cB,param:ct,element:cu,name:cy[0],value:cD,priority:cB in G?G[cB]:cB.charCodeAt(0)*10+(Number(ct)||0)};if(cB==="html"||cB==="text"){var cv=n(cD);avalon.mix(cA,cv);cA.filters=cA.filters.replace(co,function(){cA.type="html";cA.group=1;return""})}if(ap==="ms-if-loop"){cA.priority+=100}if(cr.length){cq.push(cA);if(cB==="widget"){cu.msData=cu.msData||cs}}}}}}if(cs["ms-attr-checked"]&&cs["ms-duplex"]){bE("warning!一个元素上不能同时定义ms-attr-checked与ms-duplex")}cq.sort(C);var cC=true;for(cx=0;cA=cq[cx];cx++){cB=cA.type;if(aS.test(cB)){return bV(cq.slice(0,cx+1),cr)}else{if(cC){cC=!cg.test(cB)}}}bV(cq,cr);if(cC&&!aI[cu.tagName]&&aH.test(cu.innerHTML+cu.textContent)){aE&&aE(cu);an(cu,cr)}}var aS=/^if|widget|repeat$/;var cg=/^each|with|html|include$/;function an(cr,cq){var cs=cr.firstChild;while(cs){var ap=cs.nextSibling;aj(cs,cs.nodeType,cq);cs=ap}}function aw(ap,cq){for(var cr=0,cs;cs=ap[cr++];){aj(cs,cs.nodeType,cq)}}function aj(cr,ap,cq){if(ap===1){a2(cr,cq)}else{if(ap===3&&T.test(cr.data)){w(cr,cq)}else{if(Z.commentInterpolate&&ap===8&&!T.test(cr.nodeValue)){w(cr,cq)}}}}function a2(ct,cr,cs){var cq=ct.getAttribute("ms-skip");var ap=ct.getAttributeNode("ms-important");var cv=ct.getAttributeNode("ms-controller");if(typeof cq==="string"){return}else{if(cs=ap||cv){var cu=avalon.vmodels[cs.value];if(!cu){return}cr=cs===ap?[cu]:[cu].concat(cr);ct.removeAttribute(cs.name);ct.classList.remove(cs.name);H(ct,cu)}}br(ct,cr)}var co=/\|\s*html\s*/,a0=/\|\|/g,ca=/&lt;/g,W=/&gt;/g;rstringLiteral=/(['"])(\\\1|.)+?\1/g;function n(cr){if(cr.indexOf("|")>0){var ap=cr.replace(rstringLiteral,function(cs){return Array(cs.length+1).join("1")});var cq=ap.replace(a0,"\u1122\u3344").indexOf("|");if(cq>-1){return{filters:cr.slice(cq),value:cr.slice(0,cq),expr:true}}}return{value:cr,filters:"",expr:true}}function bT(cs){var cr=[],cq,ct=0,ap;do{ap=cs.indexOf(bM,ct);if(ap===-1){break}cq=cs.slice(ct,ap);if(cq){cr.push({value:cq,filters:"",expr:false})}ct=ap+bM.length;ap=cs.indexOf(aT,ct);if(ap===-1){break}cq=cs.slice(ct,ap);if(cq){cr.push(n(cq))}ct=ap+aT.length}while(1);cq=cs.slice(ct);if(cq){cr.push({value:cq,expr:false,filters:""})}return cr}function w(cu,ap){var cv=[];if(cu.nodeType===8){var cr=n(cu.nodeValue);var ct=[cr]}else{ct=bT(cu.data)}if(ct.length){for(var cq=0;cr=ct[cq++];){var cs=bK.createTextNode(cr.value);if(cr.expr){cr.type="text";cr.element=cs;cr.filters=cr.filters.replace(co,function(){cr.type="html";cr.group=1;return""});cv.push(cr)}bA.appendChild(cs)}cu.parentNode.replaceChild(bA,cu);if(cv.length){bV(cv,ap)}}}function aY(ap){return ap.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function k(ap){if(ap.indexOf("-")<0&&ap.indexOf("_")<0){return ap}return ap.replace(/[-_][^-_]/g,function(cq){return cq.charAt(1).toUpperCase()})}"add,remove".replace(bf,function(ap){avalon.fn[ap+"Class"]=function(cq){var cr=this[0];if(cq&&typeof cq==="string"&&cr&&cr.nodeType===1){cq.replace(/\S+/g,function(cs){cr.classList[ap](cs)})}return this}});avalon.fn.mix({hasClass:function(ap){var cq=this[0]||{};return cq.nodeType===1&&cq.classList.contains(ap)},toggleClass:function(cu,cr){var cs,cq=0;var cv=cu.split(/\s+/);var ap=typeof cr==="boolean";while((cs=cv[cq++])){var ct=ap?cr:!this.hasClass(cs);this[ct?"addClass":"removeClass"](cs)}return this},attr:function(ap,cq){if(arguments.length===2){this[0].setAttribute(ap,cq);return this}else{return this[0].getAttribute(ap)}},data:function(cq,cr){cq="data-"+aY(cq||"");switch(arguments.length){case 2:this.attr(cq,cr);return this;case 1:var cs=this.attr(cq);return ce(cs);case 0:var ap={};bX.forEach.call(this[0].attributes,function(ct){if(ct){cq=ct.name;if(!cq.indexOf("data-")){cq=k(cq.slice(5));ap[cq]=ce(ct.value)}}});return ap}},removeData:function(ap){ap="data-"+aY(ap);this[0].removeAttribute(ap);return this},css:function(cq,cs){if(avalon.isPlainObject(cq)){for(var cr in cq){avalon.css(this,cr,cq[cr])}}else{var ap=avalon.css(this,cq,cs)}return ap!==void 0?ap:this},position:function(){var cr,cs,cq=this[0],ap={top:0,left:0};if(!cq){return}if(this.css("position")==="fixed"){cs=cq.getBoundingClientRect()}else{cr=this.offsetParent();cs=this.offset();if(cr[0].tagName!=="HTML"){ap=cr.offset()}ap.top+=avalon.css(cr[0],"borderTopWidth",true);ap.left+=avalon.css(cr[0],"borderLeftWidth",true)}return{top:cs.top-ap.top-avalon.css(cq,"marginTop",true),left:cs.left-ap.left-avalon.css(cq,"marginLeft",true)}},offsetParent:function(){var ap=this[0].offsetParent;while(ap&&avalon.css(ap,"position")==="static"){ap=ap.offsetParent}return avalon(ap||b6)},bind:function(cr,cq,ap){if(this[0]){return avalon.bind(this[0],cr,cq,ap)}},unbind:function(cr,cq,ap){if(this[0]){avalon.unbind(this[0],cr,cq,ap)}return this},val:function(ct){var cs=this[0];if(cs&&cs.nodeType===1){var cq=arguments.length===0;var ap=cq?":get":":set";var cr=av[b8(cs)+ap];if(cr){var cu=cr(cs,ct)}else{if(cq){return(cs.value||"").replace(/\r/g,"")}else{cs.value=ct}}}return cq?cu:this}});if(b6.dataset){avalon.fn.data=function(cq,cs){var cr=this[0].dataset;switch(arguments.length){case 2:cr[cq]=cs;return this;case 1:cs=cr[cq];return ce(cs);case 0:var ap=p();for(cq in cr){ap[cq]=ce(cr[cq])}return ap}}}var bG=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/;avalon.parseJSON=JSON.parse;function ce(ap){try{if(typeof ap==="object"){return ap}ap=ap==="true"?true:ap==="false"?false:ap==="null"?null:+ap+""===ap?+ap:bG.test(ap)?JSON.parse(ap):ap}catch(cq){}return ap}avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(cq,ap){avalon.fn[cq]=function(cu){var cr=this[0]||{},ct=bF(cr),cs=cq==="scrollTop";if(!arguments.length){return ct?ct[ap]:cr[cq]}else{if(ct){ct.scrollTo(!cs?cu:ct[ap],cs?cu:ct[ap])}else{cr[cq]=cu}}}});function bF(ap){return ap.window&&ap.document?ap:ap.nodeType===9?ap.defaultView:false}var r=avalon.cssHooks=p();var a4=["","-webkit-","-moz-","-ms-"];var bh={"float":"cssFloat"};avalon.cssNumber=cl("columnCount,order,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");avalon.cssName=function(ap,cs,cr){if(bh[ap]){return bh[ap]}cs=cs||b6.style;for(var cq=0,ct=a4.length;cq<ct;cq++){cr=k(a4[cq]+ap);if(cr in cs){return(bh[ap]=cr)}}return null};r["@:set"]=function(cq,ap,cr){cq.style[ap]=cr};r["@:get"]=function(cs,cq){if(!cs||!cs.style){throw new Error("getComputedStyle要求传入一个节点 "+cs)}var ap,cr=getComputedStyle(cs);if(cr){ap=cq==="filter"?cr.getPropertyValue(cq):cr[cq];if(ap===""){ap=cs.style[cq]}}return ap};r["opacity:get"]=function(cq){var ap=r["@:get"](cq,"opacity");return ap===""?"1":ap};"top,left".replace(bf,function(ap){r[ap+":get"]=function(cr){var cq=r["@:get"](cr,ap);return/px$/.test(cq)?cq:avalon(cr).position()[ap]+"px"}});var by={position:"absolute",visibility:"hidden",display:"block"};var I=/^(none|table(?!-c[ea]).+)/;function M(cs,cu){if(cs.offsetWidth<=0){var cr=getComputedStyle(cs,null);if(I.test(cr["display"])){var ct={node:cs};for(var ap in by){ct[ap]=cr[ap];cs.style[ap]=by[ap]}cu.push(ct)}var cq=cs.parentNode;if(cq&&cq.nodeType===1){M(cq,cu)}}}"Width,Height".replace(bf,function(cr){var ct=cr.toLowerCase(),cq="client"+cr,ap="scroll"+cr,cs="offset"+cr;r[ct+":get"]=function(cw,cx,cv){var cy=-4;if(typeof cv==="number"){cy=cv}cx=cr==="Width"?["Left","Right"]:["Top","Bottom"];var cu=cw[cs];if(cy===2){return cu+avalon.css(cw,"margin"+cx[0],true)+avalon.css(cw,"margin"+cx[1],true)}if(cy<0){cu=cu-avalon.css(cw,"border"+cx[0]+"Width",true)-avalon.css(cw,"border"+cx[1]+"Width",true)}if(cy===-4){cu=cu-avalon.css(cw,"padding"+cx[0],true)-avalon.css(cw,"padding"+cx[1],true)}return cu};r[ct+"&get"]=function(cv){var cw=[];M(cv,cw);var cy=r[ct+":get"](cv);for(var cu=0,cx;cx=cw[cu++];){cv=cx.node;for(var cz in cx){if(typeof cx[cz]==="string"){cv.style[cz]=cx[cz]}}}return cy};avalon.fn[ct]=function(cv){var cu=this[0];if(arguments.length===0){if(cu.setTimeout){return cu["inner"+cr]}if(cu.nodeType===9){var cw=cu.documentElement;return Math.max(cu.body[ap],cw[ap],cu.body[cs],cw[cs],cw[cq])}return r[ct+"&get"](cu)}else{return this.css(ct,cv)}};avalon.fn["inner"+cr]=function(){return r[ct+":get"](this[0],void 0,-2)};avalon.fn["outer"+cr]=function(cu){return r[ct+":get"](this[0],void 0,cu===true?2:0)}});avalon.fn.offset=function(){var cr=this[0];try{var cq=cr.getBoundingClientRect();if(cq.width||cq.height||cr.getClientRects().length){var cu=cr.ownerDocument;var ap=cu.documentElement;var ct=cu.defaultView;return{top:cq.top+ct.pageYOffset-ap.clientTop,left:cq.left+ct.pageXOffset-ap.clientLeft}}}catch(cs){return{left:0,top:0}}};function b8(cq){var ap=cq.tagName.toLowerCase();return ap==="input"&&/checkbox|radio/.test(cq.type)?"checked":ap}var av={"select:get":function(ap,cv){var cr,cx=ap.options,ct=ap.selectedIndex,cs=ap.type==="select-one"||ct<0,cw=cs?null:[],cu=cs?ct+1:cx.length,cq=ct<0?cu:cs?ct:0;for(;cq<cu;cq++){cr=cx[cq];if((cr.selected||cq===ct)&&!cr.disabled){cv=cr.value;if(cs){return cv}cw.push(cv)}}return cw},"select:set":function(cs,ap,ct){ap=[].concat(ap);for(var cq=0,cr;cr=cs.options[cq++];){if((cr.selected=ap.indexOf(cr.value)>-1)){ct=true}}if(!ct){cs.selectedIndex=-1}}};var X=JSON.stringify;var y=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",");var b7=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g;var aA=/[^\w$]+/g;var P=new RegExp(["\\b"+y.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var i=/\b\d[^,]*/g;var cj=/^,+|,+$/g;var O=new f(512);var af=function(cs){var cr=","+cs.trim();var cq=O.get(cr);if(cq){return cq}var ap=cs.replace(b7,"").replace(aA,",").replace(P,"").replace(i,"").replace(cj,"").split(/^$|,+/);return O.put(cr,b3(ap))};function bb(cv,cs,cq,cu){var ap=[],ct=" = "+cq+".";for(var cr=cv.length,cw;cw=cv[--cr];){if(cs.hasOwnProperty(cw)){ap.push(cw+ct+cw);cu.vars.push(cw);if(cu.type==="duplex"){cv.get=cq+"."+cw}cv.splice(cr,1)}}return ap}function b3(cu){var ap=[],cs={};for(var cq=0;cq<cu.length;cq++){var cr=cu[cq];var ct=cr&&typeof cr.$id==="string"?cr.$id:cr;if(!cs[ct]){cs[ct]=ap.push(cr)}}return ap}var bU=new f(128);var c=/\w\[.*\]|\w\.\w/;var cm=/(\$proxy\$[a-z]+)\d+$/;var aq=/\)\s*$/;var a7=/\)\s*\|/g;var j=/\|\s*([$\w]+)/g;var bt=/"\s*\["/g;var A=/"\s*\(/g;function m(cq,ap){ap=ap.replace(aq,"").replace(a7,function(){return"],|"}).replace(j,function(cs,cr){return"["+X(cr)}).replace(bt,function(){return'"],["'}).replace(A,function(){return'",'})+"]";return"return avalon.filters.$filter("+cq+", "+ap+")"}function bx(ap,cy,cH){var cz=cH.type;var ct=cH.filters||"";var cG=cy.map(function(cJ){return String(cJ.$id).replace(cm,"$1")})+ap+cz+ct;var cw=af(ap).concat(),cu=[],cv=[],cr=[],cA="";cy=b3(cy);cH.vars=[];for(var cC=0,cE=cy.length;cC<cE;cC++){if(cw.length){var cI="vm"+ai+"_"+cC;cv.push(cI);cr.push(cy[cC]);cu.push.apply(cu,bb(cw,cy[cC],cI,cH))}}if(!cu.length&&cz==="duplex"){return}if(cz!=="duplex"&&(ap.indexOf("||")>-1||ap.indexOf("&&")>-1)){cH.vars.forEach(function(cJ){var cK=new RegExp("\\b"+cJ+"(?:\\.\\w+|\\[\\w+\\])+","ig");ap=ap.replace(cK,function(cM){var cR=cM.charAt(cJ.length);var cO=bm?ap.slice(arguments[1]+cM.length):RegExp.rightContext;var cQ=/^\s*\(/.test(cO);if(cR==="."||cR==="["||cQ){var cL="var"+String(Math.random()).replace(/^0\./,"");if(cQ){var cP=cM.split(".");if(cP.length>2){var cN=cP.pop();cu.push(cL+" = "+cP.join("."));return cL+"."+cN}else{return cM}}cu.push(cL+" = "+cM);return cL}else{return cM}})})}cH.args=cr;var cs=bU.get(cG);if(cs){cH.evaluator=cs;return}cA=cu.join(", ");if(cA){cA="var "+cA}if(/\S/.test(ct)){if(!/text|html/.test(cH.type)){throw Error("ms-"+cH.type+"不支持过滤器")}ap="\nvar ret"+ai+" = "+ap+";\r\n";ap+=m("ret"+ai,ct)}else{if(cz==="duplex"){var cq="'use strict';\nreturn function(vvv){\n\t"+cA+";\n\tif(!arguments.length){\n\t\treturn "+ap+"\n\t}\n\t"+(!c.test(ap)?cw.get:ap)+"= vvv;\n} ";try{cs=Function.apply(h,cv.concat(cq));cH.evaluator=bU.put(cG,cs)}catch(cF){bE("debug: parse error,"+cF.message)}return}else{if(cz==="on"){if(ap.indexOf("(")===-1){ap+=".call(this, $event)"}else{ap=ap.replace("(",".call(this,")}cv.push("$event");ap="\nreturn "+ap+";";var cD=ap.lastIndexOf("\nreturn");var cB=ap.slice(0,cD);var cx=ap.slice(cD);ap=cB+"\n"+cx}else{ap="\nreturn "+ap+";"}}}try{cs=Function.apply(h,cv.concat("'use strict';\n"+cA+ap));cH.evaluator=bU.put(cG,cs)}catch(cF){bE("debug: parse error,"+cF.message)}finally{cw=textBuffer=cv=null}}function cd(cq,ap,cr,cs,ct){if(Array.isArray(cs)){cq=cs.map(function(cu){return cu.expr?"("+cu.value+")":X(cu.value)}).join(" + ")}bx(cq,ap,cr);if(cr.evaluator&&!ct){cr.handler=S[cr.handlerName||cr.type];e(cr)}}avalon.parseExprProxy=cd;var bY=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");var u={};bY.replace(bf,function(ap){u[ap.toLowerCase()]=ap});var aQ={"accept-charset":"acceptCharset","char":"ch","charoff":"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"};var g=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");g.replace(bf,function(ap){aQ[ap.toLowerCase()]=ap});var at=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/img;var aF=/<noscript.*?>([\s\S]+?)<\/noscript>/im;var ab=function(){return new (bs.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")};var bz=avalon.templateCache={};ck.attr=function(cs,ap){var ct=cs.value.trim(),cu=true;if(ct.indexOf(bM)>-1&&ct.indexOf(aT)>2){cu=false;if(T.test(ct)&&RegExp.rightContext===""&&RegExp.leftContext===""){cu=true;ct=RegExp.$1}}if(cs.type==="include"){var cr=cs.element;cs.includeRendered=ay(cr,"data-include-rendered",ap);cs.includeLoaded=ay(cr,"data-include-loaded",ap);var cq=cs.includeReplace=!!avalon(cr).data("includeReplace");if(avalon(cr).data("includeCache")){cs.templateCache={}}cs.startInclude=bK.createComment("ms-include");cs.endInclude=bK.createComment("ms-include-end");if(cq){cs.element=cs.startInclude;cr.parentNode.insertBefore(cs.startInclude,cr);cr.parentNode.insertBefore(cs.endInclude,cr.nextSibling)}else{cr.insertBefore(cs.startInclude,cr.firstChild);cr.appendChild(cs.endInclude)}}cs.handlerName="attr";cd(ct,ap,cs,(cu?0:bT(cs.value)))};S.attr=function(cL,cD,cH){var cr=cH.type,cB=cH.param;if(cr==="css"){avalon(cD).css(cB,cL)}else{if(cr==="attr"){if(u[cB]){var cv=u[cB];if(typeof cD[cv]==="boolean"){return cD[cv]=!!cL}}var cy=(cL===false)||(cL===null)||(cL===void 0);if(!au&&aQ[cB]){cB=aQ[cB]}if(cy){return cD.removeAttribute(cB)}var cw=Y.test(cD)?false:(bK.namespaces&&isVML(cD))?true:cB in cD.cloneNode(false);if(cw){cD[cB]=cL}else{cD.setAttribute(cB,cL)}}else{if(cr==="include"&&cL){var cC=cH.vmodels;var cI=cH.includeRendered;var cz=cH.includeLoaded;var cF=cH.includeReplace;var cG=cF?cD.parentNode:cD;var cE=function(cR){if(cz){cR=cz.apply(cG,[cR].concat(cC))}if(cI){d(cG,function(){cI.call(cG)},NaN)}var cP=cH.includeLastID;if(cH.templateCache&&cP&&cP!==cL){var cO=cH.templateCache[cP];if(!cO){cO=cH.templateCache[cP]=bK.createElement("div");ac.appendChild(cO)}}cH.includeLastID=cL;while(true){var cN=cH.startInclude.nextSibling;if(cN&&cN!==cH.endInclude){cG.removeChild(cN);if(cO){cO.appendChild(cN)}}else{break}}var cQ=a6(cH,cL,cR);var cM=avalon.slice(cQ.childNodes);cG.insertBefore(cQ,cH.endInclude);aw(cM,cC)};if(cH.param==="src"){if(bz[cL]){avalon.nextTick(function(){cE(bz[cL])})}else{var ct=ab();ct.onreadystatechange=function(){if(ct.readyState===4){var cM=ct.status;if(cM>=200&&cM<300||cM===304||cM===1223){cE(bz[cL]=ct.responseText)}}};ct.open("GET",cL,true);if("withCredentials" in ct){ct.withCredentials=true}ct.setRequestHeader("X-Requested-With","XMLHttpRequest");ct.send(null)}}else{var cq=cL&&cL.nodeType===1?cL:bK.getElementById(cL);if(cq){if(cq.tagName==="NOSCRIPT"&&!(cq.innerHTML||cq.fixIE78)){ct=ab();ct.open("GET",location,false);ct.send(null);var cJ=bK.getElementsByTagName("noscript");var cs=(ct.responseText||"").match(at)||[];var cx=cs.length;for(var cA=0;cA<cx;cA++){var cK=cJ[cA];if(cK){cK.style.display="none";cK.fixIE78=(cs[cA].match(aF)||["","&nbsp;"])[1]}}}avalon.nextTick(function(){cE(cq.fixIE78||cq.value||cq.innerText||cq.innerHTML)})}}}else{if(!b6.hasAttribute&&typeof cL==="string"&&(cr==="src"||cr==="href")){cL=cL.replace(/&amp;/g,"&")}cD[cr]=cL;if(bs.chrome&&cD.tagName==="EMBED"){var cu=cD.parentNode;var ap=document.createComment("ms-src");cu.replaceChild(ap,cD);cu.replaceChild(cD,ap)}}}}};function a6(ap,cu,cs){var ct=ap.templateCache&&ap.templateCache[cu];if(ct){var cr=bK.createDocumentFragment(),cq;while(cq=ct.firstChild){cr.appendChild(cq)}return cr}return avalon.parseHTML(cs)}"title,alt,src,value,css,include,href".replace(bf,function(ap){ck[ap]=ck.attr});ck["class"]=function(cu,ap){var cr=cu.param,cx=cu.value,ct;cu.handlerName="class";if(!cr||isFinite(cr)){cu.param="";var cq=cx.replace(am,function(cy){return cy.replace(/./g,"0")});var cv=cq.indexOf(":");if(cv===-1){var cw=cx}else{cw=cx.slice(0,cv);ct=cx.slice(cv+1);bx(ct,ap,cu);if(!cu.evaluator){bE("debug: ms-class '"+(ct||"").trim()+"' 不存在于VM中");return false}else{cu._evaluator=cu.evaluator;cu._args=cu.args}}var cs=T.test(cw);if(!cs){cu.immobileClass=cw}cd("",ap,cu,(cs?bT(cw):0))}else{cu.immobileClass=cu.oldStyle=cu.param;cd(cx,ap,cu)}};S["class"]=function(cr,cs,cu){var cq=avalon(cs),ap=cu.type;if(ap==="class"&&cu.oldStyle){cq.toggleClass(cu.oldStyle,!!cr)}else{cu.toggleClass=cu._evaluator?!!cu._evaluator.apply(cs,cu._args):true;cu.newClass=cu.immobileClass||cr;if(cu.oldClass&&cu.newClass!==cu.oldClass){cq.removeClass(cu.oldClass)}cu.oldClass=cu.newClass;switch(ap){case"class":cq.toggleClass(cu.newClass,cu.toggleClass);break;case"hover":case"active":if(!cu.hasBindEvent){var ct="mouseenter";var cy="mouseleave";if(ap==="active"){cs.tabIndex=cs.tabIndex||-1;ct="mousedown";cy="mouseup";var cx=cq.bind("mouseleave",function(){cu.toggleClass&&cq.removeClass(cu.newClass)})}var cw=cq.bind(ct,function(){cu.toggleClass&&cq.addClass(cu.newClass)});var cv=cq.bind(cy,function(){cu.toggleClass&&cq.removeClass(cu.newClass)});cu.rollback=function(){cq.unbind("mouseleave",cx);cq.unbind(ct,cw);cq.unbind(cy,cv)};cu.hasBindEvent=true}break}}};"hover,active".replace(bf,function(ap){ck[ap]=ck["class"]});S.data=function(cs,cq,cr){var ap="data-"+cr.param;if(cs&&typeof cs==="object"){cq[ap]=cs}else{cq.setAttribute(ap,String(cs))}};var b0=ck.duplex=function(cu,ap){var cr=cu.element,cx;cd(cu.value,ap,cu,0,1);cu.changed=ay(cr,"data-duplex-changed",ap)||h;if(cu.evaluator&&cu.args){var cs=[];var ct=cl("string,number,boolean,checked");if(cr.type==="radio"&&cu.param===""){cu.param="checked"}if(cr.msData){cr.msData["ms-duplex"]=cu.value}cu.param.replace(/\w+/g,function(cz){if(/^(checkbox|radio)$/.test(cr.type)&&/^(radio|checked)$/.test(cz)){if(cz==="radio"){bE("ms-duplex-radio已经更名为ms-duplex-checked")}cz="checked";cu.isChecked=true}if(cz==="bool"){cz="boolean";bE("ms-duplex-bool已经更名为ms-duplex-boolean")}else{if(cz==="text"){cz="string";bE("ms-duplex-text已经更名为ms-duplex-string")}}if(ct[cz]){cx=true}avalon.Array.ensure(cs,cz)});if(!cx){cs.push("string")}cu.param=cs.join("-");cu.bound=function(cA,cB){if(cr.addEventListener){cr.addEventListener(cA,cB,false)}else{cr.attachEvent("on"+cA,cB)}var cz=cu.rollback;cu.rollback=function(){cr.avalonSetter=null;avalon.unbind(cr,cA,cB);cz&&cz()}};for(var cv in avalon.vmodels){var cy=avalon.vmodels[cv];cy.$fire("avalon-ms-duplex-init",cu)}var cw=cu.pipe||(cu.pipe=aL);cw(null,cu,"init");var cq=cr.tagName;b0[cq]&&b0[cq](cr,cu.evaluator.apply(null,cu.args),cu)}};function N(ap){return ap==null?"":ap}avalon.duplexHooks={checked:{get:function(cq,ap){return !ap.element.oldValue}},string:{get:function(ap){return ap},set:N},"boolean":{get:function(ap){return ap==="true"},set:N},number:{get:function(cs,cr){var cq=parseFloat(cs);if(-cs===-cq){return cq}var ap=/strong|medium|weak/.exec(cr.element.getAttribute("data-duplex-number"))||["medium"];switch(ap[0]){case"strong":return 0;case"medium":return cs===""?"":0;case"weak":return cs}},set:N}};function aL(cs,cq,ap,cr){cq.param.replace(/\w+/g,function(ct){var cu=avalon.duplexHooks[ct];if(cu&&typeof cu[ap]==="function"){cs=cu[ap](cs,cq)}});return cs}var D,bQ=[];avalon.tick=function(ap){if(bQ.push(ap)===1){D=setInterval(bH,60)}};function bH(){for(var cq=bQ.length-1;cq>=0;cq--){var ap=bQ[cq];if(ap()===false){bQ.splice(cq,1)}}if(!bQ.length){clearInterval(D)}}var aP=h;var b1=/text|password|hidden/;new function(){try{var cq={};var cu=HTMLInputElement.prototype;var cs=HTMLTextAreaElement.prototype;function ap(cv){if(avalon.contains(b6,this)){cq[this.tagName].call(this,cv);if(!b1.test(this.type)){return}if(!this.msFocus&&this.avalonSetter){this.avalonSetter()}}}var ct=HTMLInputElement.prototype;Object.getOwnPropertyNames(ct);cq["INPUT"]=Object.getOwnPropertyDescriptor(cu,"value").set;Object.defineProperty(cu,"value",{set:ap});cq["TEXTAREA"]=Object.getOwnPropertyDescriptor(cs,"value").set;Object.defineProperty(cs,"value",{set:ap})}catch(cr){aP=avalon.tick}};b0.INPUT=function(ct,cu,cs){var cw=ct.type,cr=cs.bound,ap=avalon(ct),cy=false;function cz(cB){cs.changed.call(this,cB,cs)}function cq(){cy=true}function cv(){cy=false}var cx=function(){if(cy){return}var cC=ct.oldValue=ct.value;var cB=cs.pipe(cC,cs,"get");if(ap.data("duplex-observe")!==false){cu(cB);cz.call(ct,cB);if(ap.data("duplex-focus")){avalon.nextTick(function(){ct.focus()})}}};cs.handler=function(){var cB=cs.pipe(cu(),cs,"set")+"";if(cB!==ct.oldValue){ct.value=cB}};if(cs.isChecked||cw==="radio"){cx=function(){if(ap.data("duplex-observe")!==false){var cB=cs.pipe(ct.value,cs,"get");cu(cB);cz.call(ct,cB)}};cs.handler=function(){var cC=cu();var cB=cs.isChecked?!!cC:cC+""===ct.value;ct.checked=ct.oldValue=cB};cr("click",cx)}else{if(cw==="checkbox"){cx=function(){if(ap.data("duplex-observe")!==false){var cC=ct.checked?"ensure":"remove";var cB=cu();if(!Array.isArray(cB)){bE("ms-duplex应用于checkbox上要对应一个数组");cB=[cB]}avalon.Array[cC](cB,cs.pipe(ct.value,cs,"get"));cz.call(ct,cB)}};cs.handler=function(){var cB=[].concat(cu());ct.checked=cB.indexOf(cs.pipe(ct.value,cs,"get"))>-1};cr("change",cx)}else{var cA=ct.getAttribute("data-duplex-event")||"input";if(ct.attributes["data-event"]){bE("data-event指令已经废弃，请改用data-duplex-event")}cA.replace(bf,function(cB){switch(cB){case"input":cr("input",cx);cr("DOMAutoComplete",cx);if(!bm){cr("compositionstart",cq);cr("compositionend",cv)}break;default:cr(cB,cx);break}})}}cr("focus",function(){ct.msFocus=true});cr("blur",function(){ct.msFocus=false});if(b1.test(cw)){aP(function(){if(b6.contains(ct)){if(!ct.msFocus&&ct.oldValue!==ct.value){cx()}}else{if(!ct.msRetain){return false}}})}ct.avalonSetter=cx;ct.oldValue=ct.value;e(cs);cz.call(ct,ct.value)};b0.TEXTAREA=b0.INPUT;b0.SELECT=function(cr,ct,cs){var cq=avalon(cr);function ap(){if(cq.data("duplex-observe")!==false){var cu=cq.val();if(Array.isArray(cu)){cu=cu.map(function(cv){return cs.pipe(cv,cs,"get")})}else{cu=cs.pipe(cu,cs,"get")}if(cu+""!==cr.oldValue){ct(cu)}cs.changed.call(cr,cu,cs)}}cs.handler=function(){var cu=ct();cu=cu&&cu.$model||cu;if(Array.isArray(cu)){if(!cr.multiple){bE("ms-duplex在<select multiple=true>上要求对应一个数组")}}else{if(cr.multiple){bE("ms-duplex在<select multiple=false>不能对应一个数组")}}cu=Array.isArray(cu)?cu.map(String):cu+"";if(cu+""!==cr.oldValue){cq.val(cu);cr.oldValue=cu+""}};cs.bound("change",ap);d(cr,function(){e(cs);cs.changed.call(cr,ct(),cs)},NaN)};S.html=function(cr,ct,cv){cr=cr==null?"":cr;var cy="group" in cv;var cz=cy?ct.parentNode:ct;if(!cz){return}if(cr.nodeType===11){var cx=cr}else{if(cr.nodeType===1||cr.item){var ap=cr.nodeType===1?cr.childNodes:cr.item?cr:[];cx=bA.cloneNode(true);while(ap[0]){cx.appendChild(ap[0])}}else{cx=avalon.parseHTML(cr)}}var cw=bK.createComment("ms-html");if(cy){cz.insertBefore(cw,ct);var cq=cv.group,cu=1;while(cu<cq){var cs=ct.nextSibling;if(cs){cz.removeChild(cs);cu++}}cz.removeChild(ct);cv.element=cw}else{avalon.clearHTML(cz).appendChild(cw)}if(cy){cv.group=cx.childNodes.length||1}ap=avalon.slice(cx.childNodes);if(ap[0]){if(cw.parentNode){cw.parentNode.replaceChild(cx,cw)}if(cy){cv.element=ap[0]}}aw(ap,cv.vmodels)};ck["if"]=ck.data=ck.text=ck.html=function(cq,ap){cd(cq.value,ap,cq)};S["if"]=function(cs,cq,cr){if(cs){if(cq.nodeType===8){cq.parentNode.replaceChild(cr.template,cq);cq=cr.element=cr.template}if(cq.getAttribute(cr.name)){cq.removeAttribute(cr.name);br(cq,cr.vmodels)}cr.rollback=null}else{if(cq.nodeType===1){var ap=cr.element=bK.createComment("ms-if");cq.parentNode.replaceChild(ap,cq);cr.template=cq;ac.appendChild(cq);cr.rollback=function(){if(cq.parentNode===ac){ac.removeChild(cq)}}}}};var a3=/\(([^)]*)\)/;ck.on=function(ct,cq){var cs=ct.value;ct.type="on";var cr=ct.param.replace(/-\d+$/,"");if(typeof ck.on[cr+"Hook"]==="function"){ck.on[cr+"Hook"](ct)}if(cs.indexOf("(")>0&&cs.indexOf(")")>-1){var ap=(cs.match(a3)||["",""])[1].trim();if(ap===""||ap==="$event"){cs=cs.replace(a3,"")}}cd(cs,cq,ct)};S.on=function(ct,cr,cs){ct=function(cv){var cu=cs.evaluator||h;return cu.apply(this,cs.args.concat(cv))};var ap=cs.param.replace(/-\d+$/,"");if(ap==="scan"){ct.call(cr,{type:ap})}else{if(typeof cs.specialBind==="function"){cs.specialBind(cr,ct)}else{var cq=avalon.bind(cr,ap,ct)}}cs.rollback=function(){if(typeof cs.specialUnbind==="function"){cs.specialUnbind()}else{avalon.unbind(cr,ap,cq)}}};ck.repeat=function(cI,cF){var ct=cI.type;cd(cI.value,cF,cI,0,1);cI.proxies=[];var cu=false;try{var cB=cI.$repeat=cI.evaluator.apply(0,cI.args||[]);var cv=avalon.type(cB);if(cv!=="object"&&cv!=="array"){cu=true;avalon.log("warning:"+cI.value+"对应类型不正确")}}catch(cG){cu=true;avalon.log("warning:"+cI.value+"编译出错")}var ap=cI.value.split(".")||[];if(ap.length>1){ap.pop();var cD=ap[0];for(var cE=0,cz;cz=cF[cE++];){if(cz&&cz.hasOwnProperty(cD)){var cs=cz[cD].$events||{};cs[bP]=cs[bP]||[];cs[bP].push(cI);break}}}var cH=cI.element;cH.removeAttribute(cI.name);cI.sortedCallback=ay(cH,"data-with-sorted",cF);cI.renderedCallback=ay(cH,"data-"+ct+"-rendered",cF);var cC=a5(ct);var cr=cI.element=bK.createComment(cC+":end");cI.clone=bK.createComment(cC);bA.appendChild(cr);if(ct==="each"||ct==="with"){cI.template=cH.innerHTML.trim();avalon.clearHTML(cH).appendChild(cr)}else{cI.template=cH.outerHTML.trim();cH.parentNode.replaceChild(cr,cH)}cI.template=avalon.parseHTML(cI.template);cI.rollback=function(){var cL=cI.element;if(!cL){return}S.repeat.call(cI,"clear");var cJ=cL.parentNode;var cK=cI.template;var cM=cK.firstChild;cJ.replaceChild(cK,cL);var cN=cI.$stamp;cN&&cN.parentNode&&cN.parentNode.removeChild(cN);cM=cI.element=cI.type==="repeat"?cM:cJ};if(cu){return}cI.handler=S.repeat;cI.$outer={};var cy="$key";var cx="$val";if(Array.isArray(cB)){cy="$first";cx="$last"}for(cE=0;cz=cF[cE++];){if(cz.hasOwnProperty(cy)&&cz.hasOwnProperty(cx)){cI.$outer=cz;break}}var cw=cB.$events;var cq=(cw||{})[bP];if(cq&&avalon.Array.ensure(cq,cI)){K(cI,cq)}if(cv==="object"){cI.$with=true;var cA=!cw?{}:cw.$withProxyPool||(cw.$withProxyPool={});cI.handler("append",cB,cA)}else{if(cB.length){cI.handler("add",0,cB.length)}}};S.repeat=function(cu,cz,cs){if(cu){var cP=this;var cw=cP.element;var cC=cw.parentNode;var cv=cP.proxies;var cN=bA.cloneNode(false);switch(cu){case"add":var cG=cz+cs;var cA=cP.$repeat;var cB=cA.length-1;var cR=[],ap;var cx=cf(cP,cz);for(var cJ=cz;cJ<cG;cJ++){var cI=be(cJ,cP);cv.splice(cJ,0,cI);aK(cP,cN,cI,cR)}cC.insertBefore(cN,cx);for(cJ=0;ap=cR[cJ++];){aw(ap.nodes,ap.vmodels);ap.nodes=ap.vmodels=null}break;case"del":cx=cv[cz].$stamp;cw=cf(cP,cz+cs);bN(cx,cw);var cK=cv.splice(cz,cs);E(cK,"each");break;case"clear":var cM=cP.$stamp||cv[0];if(cM){cx=cM.$stamp||cM;bN(cx,cw)}E(cv,"each");break;case"move":cx=cv[0].$stamp;var cF=cx.nodeValue;var cO=[];var cL=[],cH;bN(cx,cw,function(){cL.unshift(this);if(this.nodeValue===cF){cO.unshift(cL);cL=[]}});aR(cv,cz);aR(cO,cz);while(cL=cO.shift()){while(cH=cL.shift()){cN.appendChild(cH)}}cC.insertBefore(cN,cw);break;case"index":cB=cv.length-1;for(;cs=cv[cz];cz++){cs.$index=cz;cs.$first=cz===0;cs.$last=cz===cB}return;case"set":cI=cv[cz];if(cI){bW(cI.$events.$index)}return;case"append":var cE=cs;var cD=[];cR=[];for(var cQ in cz){if(cz.hasOwnProperty(cQ)&&cQ!=="hasOwnProperty"){cD.push(cQ)}}if(cP.sortedCallback){var cr=cP.sortedCallback.call(cC,cD);if(cr&&Array.isArray(cr)&&cr.length){cD=cr}}for(cJ=0;cQ=cD[cJ++];){if(cQ!=="hasOwnProperty"){if(!cE[cQ]){cE[cQ]=aZ(cQ,cP)}aK(cP,cN,cE[cQ],cR)}}var cq=cP.$stamp=cP.clone;cC.insertBefore(cq,cw);cC.insertBefore(cN,cw);for(cJ=0;ap=cR[cJ++];){aw(ap.nodes,ap.vmodels);ap.nodes=ap.vmodels=null}break}if(cu==="clear"){cu="del"}var cy=cP.renderedCallback||h,ct=arguments;d(cC,function(){cy.apply(cC,ct);if(cC.oldValue&&cC.tagName==="SELECT"){avalon(cC).val(cC.oldValue.split(","))}},NaN)}};"with,each".replace(bf,function(ap){ck[ap]=ck.repeat});function aK(cw,cu,ct,ap){var cv=cw.template.cloneNode(true);var cr=avalon.slice(cv.childNodes);if(ct.$stamp){cv.insertBefore(ct.$stamp,cv.firstChild)}cu.appendChild(cv);var cq=[ct].concat(cw.vmodels);var cs={nodes:cr,vmodels:cq};ap.push(cs)}function cf(cq,cr){var ap=cq.proxies[cr];return ap?ap.$stamp:cq.element}function bN(cs,ap,cr){while(true){var cq=ap.previousSibling;if(!cq){break}cq.parentNode.removeChild(cq);cr&&cr.call(cq);if(cq===cs){break}}}var ar=[];var aa=[];function bw(cq){var cs={$host:[],$outer:{},$stamp:1,$index:0,$first:false,$last:false,$remove:avalon.noop};cs[cq]={get:function(){return this.$host[this.$index]},set:function(cu){this.$host.set(this.$index,cu)}};var ap={$last:1,$first:1,$index:1};var cr=bB(cs,ap);var ct=cr.$events;ct[cq]=ct.$first=ct.$last=ct.$index;cr.$id=a5("$proxy$each");return cr}function be(ct,cr){var cq=cr.param||"el",cu;for(var cs=0,ap=ar.length;cs<ap;cs++){var cx=ar[cs];if(cx&&cx.hasOwnProperty(cq)){cu=cx;ar.splice(cs,1)}}if(!cu){cu=bw(cq)}var cw=cr.$repeat;var cv=cw.length-1;cu.$index=ct;cu.$first=ct===0;cu.$last=ct===cv;cu.$host=cw;cu.$outer=cr.$outer;cu.$stamp=cr.clone.cloneNode(false);cu.$remove=function(){return cw.removeAt(cu.$index)};return cu}function aD(){var ap=bB({$key:"",$outer:{},$host:{},$val:{get:function(){return this.$host[this.$key]},set:function(cq){this.$host[this.$key]=cq}}},{$val:1});ap.$id=a5("$proxy$with");return ap}function aZ(cq,cs){var ap=aa.pop();if(!ap){ap=aD()}var cr=cs.$repeat;ap.$key=cq;ap.$host=cr;ap.$outer=cs.$outer;if(cr.$events){ap.$events.$val=cr.$events[cq]}else{ap.$events={}}return ap}function E(cq,cr){var ap=cr==="each"?ar:aa;avalon.each(cq,function(cu,ct){if(ct.$events){for(var cs in ct.$events){if(Array.isArray(ct.$events[cs])){ct.$events[cs].forEach(function(cv){if(typeof cv==="object"){bg(cv)}});ct.$events[cs].length=0}}ct.$host=ct.$outer={};if(ap.unshift(ct)>Z.maxRepeatSize){ap.pop()}}});if(cr==="each"){cq.length=0}}S.text=function(cr,ap){cr=cr==null?"":cr;if(ap.nodeType===3){try{ap.data=cr}catch(cq){}}else{ap.textContent=cr}};function ag(cs,cr){var ap="_"+cs;if(!ag[ap]){var cq=bK.createElement(cs);b6.appendChild(cq);if(au){cr=getComputedStyle(cq,null).display}else{cr=cq.currentStyle.display}b6.removeChild(cq);ag[ap]=cr}return ag[ap]}avalon.parseDisplay=ag;ck.visible=function(ct,cq){var cs=avalon(ct.element);var cu=cs.css("display");if(cu==="none"){var cr=cs[0].style;var ap=/visibility/i.test(cr.cssText);var cv=cs.css("visibility");cr.display="";cr.visibility="hidden";cu=cs.css("display");if(cu==="none"){cu=ag(cs[0].nodeName)}cr.visibility=ap?cv:""}ct.display=cu;cd(ct.value,cq,ct)};S.visible=function(cr,ap,cq){ap.style.display=cr?cq.display:"none"};ck.widget=function(cv,cr){var cy=cv.value.match(bf);var cs=cv.element;var cw=cy[0];var cq=cy[1];if(!cq||cq==="$"){cq=a5(cw)}var cB=cy[2]||cw;var ct=avalon.ui[cw];if(typeof ct==="function"){cr=cs.vmodels||cr;for(var cu=0,cA;cA=cr[cu++];){if(cA.hasOwnProperty(cB)&&typeof cA[cB]==="object"){var ap=cA[cB];ap=ap.$model||ap;break}}if(ap){var cD=ap[cw+"Id"];if(typeof cD==="string"){cq=cD}}var cz=avalon.getWidgetData(cs,cw);cv.value=[cw,cq,cB].join(",");cv[cw+"Id"]=cq;cv.evaluator=h;cs.msData["ms-widget-id"]=cq;var cC=cv[cw+"Options"]=avalon.mix({},ct.defaults,ap||{},cz);cs.removeAttribute("ms-widget");var cx=ct(cs,cv,cr)||{};if(cx.$id){avalon.vmodels[cq]=cx;H(cs,cx);if(cx.hasOwnProperty("$init")){cx.$init(function(){avalon.scan(cs,[cx].concat(cr));if(typeof cC.onInit==="function"){cC.onInit.call(cs,cx,cC,cr)}})}cv.rollback=function(){try{cx.widgetElement=null;cx.$remove()}catch(cE){}cs.msData={};delete avalon.vmodels[cx.$id]};K(cv,aU);if(bs.chrome){cs.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(bI)})}}else{avalon.scan(cs,cr)}}else{if(cr.length){cs.vmodels=cr}}};var aU=[];var t=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim;var bo=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g;var ax=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/ig;var bZ={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/ig,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/ig,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/ig};var bD=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var aJ=/([^\#-~| |!])/g;function l(ct,cr,cw,cv){ct=(ct+"").replace(/[^0-9+\-Ee.]/g,"");var cq=!isFinite(+ct)?0:+ct,ap=!isFinite(+cr)?3:Math.abs(cr),cy=cv||",",cs=cw||".",cx="",cu=function(cB,cA){var cz=Math.pow(10,cA);return""+(Math.round(cB*cz)/cz).toFixed(cA)};cx=(ap?cu(cq,ap):""+Math.round(cq)).split(".");if(cx[0].length>3){cx[0]=cx[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,cy)}if((cx[1]||"").length<ap){cx[1]=cx[1]||"";cx[1]+=new Array(ap-cx[1].length+1).join("0")}return cx.join(cs)}var aO=avalon.filters={uppercase:function(ap){return ap.toUpperCase()},lowercase:function(ap){return ap.toLowerCase()},truncate:function(cr,cq,ap){cq=cq||30;ap=ap===void (0)?"...":ap;return cr.length>cq?cr.slice(0,cq-ap.length)+ap:String(cr)},$filter:function(cs){for(var cq=1,cu=arguments.length;cq<cu;cq++){var ct=arguments[cq];var cr=avalon.filters[ct.shift()];if(typeof cr==="function"){var ap=[cs].concat(ct);cs=cr.apply(null,ap)}}return cs},camelize:k,sanitize:function(ap){return ap.replace(t,"").replace(ax,function(cr,cq){var cs=cr.toLowerCase().match(/<(\w+)\s/);if(cs){var ct=bZ[cs[1]];if(ct){cr=cr.replace(ct,function(cw,cv,cx){var cu=cx.charAt(0);return cv+"="+cu+"javascript:void(0)"+cu})}}return cr.replace(bo," ").replace(/\s+/g," ")})},escape:function(ap){return String(ap).replace(/&/g,"&amp;").replace(bD,function(cs){var cr=cs.charCodeAt(0);var cq=cs.charCodeAt(1);return"&#"+(((cr-55296)*1024)+(cq-56320)+65536)+";"}).replace(aJ,function(cq){return"&#"+cq.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(ap,cq,cr){return(cq||"\uFFE5")+l(ap,isFinite(cr)?cr:2)},number:l};new function(){function cs(cz){return parseInt(cz,10)||0}function ct(cA,cB,cz){var cC="";if(cA<0){cC="-";cA=-cA}cA=""+cA;while(cA.length<cB){cA="0"+cA}if(cz){cA=cA.substr(cA.length-cB)}return cC+cA}function cw(cA,cB,cC,cz){return function(cD){var cE=cD["get"+cA]();if(cC>0||cE>-cC){cE+=cC}if(cE===0&&cC===-12){cE=12}return ct(cE,cB,cz)}}function cq(cA,cz){return function(cD,cB){var cE=cD["get"+cA]();var cC=(cz?("SHORT"+cA):cA).toUpperCase();return cB[cC][cE]}}function cy(cA){var cz=-1*cA.getTimezoneOffset();var cB=(cz>=0)?"+":"";cB+=ct(Math[cz>0?"floor":"ceil"](cz/60),2)+ct(Math.abs(cz%60),2);return cB}function cv(cA,cz){return cA.getHours()<12?cz.AMPMS[0]:cz.AMPMS[1]}var cu={yyyy:cw("FullYear",4),yy:cw("FullYear",2,0,true),y:cw("FullYear",1),MMMM:cq("Month"),MMM:cq("Month",true),MM:cw("Month",2,1),M:cw("Month",1,1),dd:cw("Date",2),d:cw("Date",1),HH:cw("Hours",2),H:cw("Hours",1),hh:cw("Hours",2,-12),h:cw("Hours",1,-12),mm:cw("Minutes",2),m:cw("Minutes",1),ss:cw("Seconds",2),s:cw("Seconds",1),sss:cw("Milliseconds",3),EEEE:cq("Day"),EEE:cq("Day",true),a:cv,Z:cy};var ap=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/;var cr=/^\/Date\((\d+)\)\/$/;aO.date=function(cA,cI){var cM=aO.date.locate,cK="",cC=[],cH,cD;cI=cI||"mediumDate";cI=cM[cI]||cI;if(typeof cA==="string"){if(/^\d+$/.test(cA)){cA=cs(cA)}else{if(cr.test(cA)){cA=+RegExp.$1}else{var cB=cA.trim();var cz=[0,0,0,0,0,0,0];var cL=new Date(0);cB=cB.replace(/^(\d+)\D(\d+)\D(\d+)/,function(cP,cO,cN,cR){var cQ=cR.length===4?[cR,cO,cN]:[cO,cN,cR];cz[0]=cs(cQ[0]);cz[1]=cs(cQ[1])-1;cz[2]=cs(cQ[2]);return""});var cF=cL.setFullYear;var cJ=cL.setHours;cB=cB.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(cP,cO,cN,cR,cQ){cz[3]=cs(cO);cz[4]=cs(cN);cz[5]=cs(cR);if(cQ){cz[6]=Math.round(parseFloat("0."+cQ)*1000)}return""});var cG=0;var cE=0;cB=cB.replace(/Z|([+-])(\d\d):?(\d\d)/,function(cP,cN,cQ,cO){cF=cL.setUTCFullYear;cJ=cL.setUTCHours;if(cN){cG=cs(cN+cQ);cE=cs(cN+cO)}return""});cz[3]-=cG;cz[4]-=cE;cF.apply(cL,cz.slice(0,3));cJ.apply(cL,cz.slice(3));cA=cL}}}if(typeof cA==="number"){cA=new Date(cA)}if(avalon.type(cA)!=="date"){return}while(cI){cD=ap.exec(cI);if(cD){cC=cC.concat(cD.slice(1));cI=cC.pop()}else{cC.push(cI);cI=null}}cC.forEach(function(cN){cH=cu[cN];cK+=cH?cH(cA,cM):cN.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return cK};var cx={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{"0":"周日","1":"周一","2":"周二","3":"周三","4":"周四","5":"周五","6":"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};cx.SHORTMONTH=cx.MONTH;aO.date.locate=cx};var bS=avalon.modules={"domReady!":{exports:avalon,state:3},"avalon":{exports:avalon,state:4}};bS.exports=bS.avalon;new function(){var cU=[];var cu=[];var cN=/\.js$/i;function cK(cZ,cY){var c0="js";cZ=cZ.replace(/^(\w+)\!/,function(c6,c5){c0=c5;return""});if(c0==="ready"){bE("debug: ready!已经被废弃，请使用domReady!");c0="domReady"}var c3="";cZ=cZ.replace(cx,function(c5){c3=c5;return""});var c4="."+c0;var c1=/js|css/.test(c4)?c4:"";cZ=cZ.replace(/\.[a-z0-9]+$/g,function(c5){if(c5===c4){c1=c5;return""}else{return c5}});var c2=avalon.mix({query:c3,ext:c1,res:c0,name:cZ,toUrl:cF},cY);c2.toUrl(cZ);return c2}function cE(c3){var cZ=c3.name;var c1=c3.res;var c0=bS[cZ];var cY=cZ&&c3.urlNoQuery;if(c0&&c0.state>=1){return cZ}c0=bS[cY];if(c0&&c0.state>=3){o(c0.deps||[],c0.factory,cY);return cY}if(cZ&&!c0){c0=bS[cY]={id:cY,state:1};var c2=function(c4){cP[c1]=c4;c4.load(cZ,c3,function(c5){if(arguments.length&&c5!==void 0){c0.exports=c5}c0.state=4;cO()})};if(!cP[c1]){o([c1],c2)}else{c2(cP[c1])}}return cZ?cY:c1+"!"}var cS=[];var cq=false;o=avalon.require=function(c4,c2,cY,c7){if(!cq){cS.push(avalon.slice(arguments));if(arguments.length<=2){cq=true;var c3=cS.splice(0,cS.length),c5;while(c5=c3.shift()){o.apply(null,c5)}}return}if(!Array.isArray(c4)){avalon.error("require方法的第一个参数应为数组 "+c4)}var c8=[];var c9=p();var c0=cY||"callback"+setTimeout("1");c7=c7||p();c7.baseUrl=Z.baseUrl;var cZ=!!c7.built;if(cY){c7.parentUrl=cY.substr(0,cY.lastIndexOf("/"));c7.mapUrl=cY.replace(cN,"")}if(cZ){var c6=cK(c7.defineName,c7);c0=c6.urlNoQuery}else{c4.forEach(function(db){var dc=cK(db,c7);var da=cE(dc);if(da){if(!c9[da]){c8.push(da);c9[da]="司徒正美"}}})}var c1=bS[c0];if(!c1||c1.state!==4){bS[c0]={id:c0,deps:cZ?c4.concat():c8,factory:c2||h,state:3}}if(!c1){cU.push(c0)}cO()};o.define=function(c2,c4,cY){if(typeof c2!=="string"){cY=c4;c4=c2;c2="anonymous"}if(!Array.isArray(c4)){cY=c4;c4=[]}var c1={built:!cq,defineName:c2};var c0=[c4,cY,c1];cY.require=function(c5){c0.splice(2,0,c5);if(bS[c5]){bS[c5].state=3;var c6=false;try{c6=cV(bS[c5].deps,c5)}catch(c7){}if(c6){avalon.error(c5+"模块与之前的模块存在循环依赖，请不要直接用script标签引入"+c5+"模块")}}delete cY.require;o.apply(null,c0)};var cZ=c1.built?"unknown":cA();if(cZ){var c3=bS[cZ];if(c3){c3.state=2}cY.require(cZ)}else{cu.push(cY)}};o.config=Z;o.define.amd=bS;var cB=Z["orig.paths"]=p();var cv=Z["orig.map"]=p();var cX=Z["packages"]=[];var cJ=Z["orig.args"]=p();avalon.mix(cp,{paths:function(cY){avalon.mix(cB,cY);Z.paths=cM(cB)},map:function(cZ){avalon.mix(cv,cZ);var cY=cM(cv,1,1);avalon.each(cY,function(c0,c1){c1.val=cM(c1.val)});Z.map=cY},packages:function(c4){c4=c4.concat(cX);var c3=p();var c1=[];for(var c2=0,c0;c0=c4[c2++];){c0=typeof c0==="string"?{name:c0}:c0;var cZ=c0.name;if(!c3[cZ]){var cY=c0.location?c0.location:cz(cZ,c0.main||"main");cY=cY.replace(cN,"");c1.push(c0);c3[cZ]=c0.location=cY;c0.reg=cw(cZ)}}Z.packages=c1.sort()},urlArgs:function(cY){if(typeof cY==="string"){cY={"*":cY}}avalon.mix(cJ,cY);Z.urlArgs=cM(cJ,1)},baseUrl:function(cY){if(!cC(cY)){var cZ=b.getElementsByTagName("base")[0];if(cZ){b.removeChild(cZ)}var c0=bK.createElement("a");c0.href=cY;cY=c0.href;if(cZ){b.insertBefore(cZ,b.firstChild)}}if(cY.length>3){Z.baseUrl=cY}},shim:function(c0){for(var cY in c0){var cZ=c0[cY];if(Array.isArray(cZ)){cZ=c0[cY]={deps:cZ}}if(!cZ.exportsFn&&(cZ.exports||cZ.init)){cZ.exportsFn=cr(cZ)}}Z.shim=c0}});function cV(c0,cY){for(var cZ=0,c1;c1=c0[cZ++];){if(bS[c1].state!==4&&(c1===cY||cV(bS[c1].deps,cY))){return true}}}function cG(cZ,cY){var c0=cR(cZ.src);cZ.onload=cZ.onerror=null;if(cY){setTimeout(function(){b.removeChild(cZ);cZ=null});bE("debug: 加载 "+c0+" 失败"+cY+" "+(!bS[c0].state))}else{return true}}function cO(){loop:for(var c0=cU.length,c3;c3=cU[--c0];){var c1=bS[c3],c2=c1.deps;if(!c2){continue}for(var cY=0,cZ;cZ=c2[cY];cY++){if(Object(bS[cZ]).state!==4){continue loop}}if(c1.state!==4){cU.splice(c0,1);cH(c1.id,c1.deps,c1.factory);cO()}}}function cT(cY,c1,c0){var cZ=bK.createElement("script");cZ.className=bP;cZ.onload=function(){var c2=cu.pop();c2&&c2.require(c1);if(c0){c0()}bE("debug: 已成功加载 "+cY);c1&&cU.push(c1);cO()};cZ.onerror=function(){cG(cZ,true)};b.insertBefore(cZ,b.firstChild);cZ.src=cY;bE("debug: 正准备加载 "+cY)}var cP=o.plugins={ready:{load:h},js:{load:function(cZ,c1,c0){var cY=c1.url;var c3=c1.urlNoQuery;var c2=Z.shim[cZ.replace(cN,"")];if(c2){o(c2.deps||[],function(){var c4=avalon.slice(arguments);cT(cY,c3,function(){c0(c2.exportsFn?c2.exportsFn.apply(0,c4):void 0)})})}else{cT(cY,c3)}}},css:{load:function(cZ,c1,c0){var cY=c1.url;b.insertAdjacentHTML("afterBegin",'<link rel="stylesheet" href="'+cY+'">');bE("debug: 已成功加载 "+cY);c0()}},text:{load:function(cZ,c1,c0){var cY=c1.url;var c2=ab();c2.onload=function(){var c3=c2.status;if(c3>399&&c3<600){avalon.error(cY+" 对应资源不存在或没有开启 CORS")}else{bE("debug: 已成功加载 "+cY);c0(c2.responseText)}};c2.open("GET",cY,true);if("withCredentials" in c2){c2.withCredentials=true}c2.setRequestHeader("X-Requested-With","XMLHttpRequest");c2.send();bE("debug: 正准备加载 "+cY)}}};o.checkDeps=cO;var cx=/(\?[^#]*)$/;function cR(cY){return(cY||"").replace(cx,"")}function cC(cY){return/^(?:[a-z]+:)?\/\//i.test(String(cY))}function cA(){var cY;try{a.b.c()}catch(c3){cY=c3.stack}if(cY){cY=cY.split(/[@ ]/g).pop();cY=cY[0]==="("?cY.slice(1,-1):cY.replace(/\s/,"");return cR(cY.replace(/(:\d+)?:\d+$/i,""))}var cZ=b.getElementsByTagName("script");for(var c1=cZ.length,c2;c2=cZ[--c1];){if(c2.className===bP&&c2.readyState==="interactive"){var c0=c2.src;return c2.className=cR(c0)}}}function cH(cY,c6,c2){var cZ=Object(bS[cY]);cZ.state=4;for(var c1=0,c4=[],c5;c5=c6[c1++];){if(c5==="exports"){var c0=cZ.exports||(cZ.exports=p());c4.push(c0)}else{c4.push(bS[c5].exports)}}var c3=c2.apply(bs,c4);if(c3!==void 0){cZ.exports=c3}delete cZ.factory;return c3}function cF(c4){if(c4.indexOf(this.res+"!")===0){c4=c4.slice(this.res.length+1)}var c1=c4;var c0=0;var c3=this.baseUrl;var cZ=this.parentUrl||c3;cW(c4,Z.paths,function(c6,c5){c1=c1.replace(c5,c6);c0=1});if(!c0){cW(c4,Z.packages,function(c7,c5,c6){c1=c1.replace(c6.name,c6.location)})}if(this.mapUrl){cW(this.mapUrl,Z.map,function(c5){cW(c1,c5,function(c7,c6){c1=c1.replace(c6,c7);cZ=c3})})}var c2=this.ext;if(c2&&c0&&c1.slice(-c2.length)===c2){c1=c1.slice(0,-c2.length)}if(!cC(c1)){cZ=this.built||/^\w/.test(c1)?c3:cZ;c1=cz(cZ,c1)}var cY=c1+c2;c1=cY+this.query;cW(c4,Z.urlArgs,function(c5){c1+=(c1.indexOf("?")===-1?"?":"&")+c5});this.url=c1;return this.urlNoQuery=cY}function cM(c1,cY,c0){var cZ=cs(c1,cY,c0);cZ.sort(cI);return cZ}function cw(cY){return new RegExp("^"+cY+"(/|$)")}function cr(cY){return function(){var cZ;if(cY.init){cZ=cY.init.apply(bs,arguments)}return cZ||(cY.exports&&cD(cY.exports))}}function cs(c2,cY,cZ){var c3=[];for(var c0 in c2){var c1={name:c0,val:c2[c0]};c3.push(c1);c1.reg=c0==="*"&&cY?/^/:cw(c0);if(cZ&&c0!=="*"){c1.reg=new RegExp("/"+c0.replace(/^\//,"")+"(/|$)")}}return c3}function cW(c0,c2,c1){c2=c2||[];for(var cY=0,cZ;cZ=c2[cY++];){if(cZ.reg.test(c0)){c1(cZ.val,cZ.name,cZ);return false}}}function cI(cZ,cY){var c1=cZ.name;var c0=cY.name;if(c0==="*"){return -1}if(c1==="*"){return 1}return c0.length-c1.length}var ap=/\/\w+\/\.\./;function cz(cZ,cY){if(cZ.charAt(cZ.length-1)!=="/"){cZ+="/"}if(cY.slice(0,2)==="./"){return cZ+cY.slice(2)}if(cY.slice(0,2)===".."){cZ+=cY;while(ap.test(cZ)){cZ=cZ.replace(ap,"")}return cZ}if(cY.slice(0,1)==="/"){return cZ+cY.slice(1)}return cZ+cY}function cD(cZ){if(!cZ){return cZ}var cY=bs;cZ.split(".").forEach(function(c0){cY=cY[c0]});return cY}var cy=bK.scripts[bK.scripts.length-1];var cQ=cy.getAttribute("data-main");if(cQ){cp.baseUrl(cQ);var cL=Z.baseUrl;Z.baseUrl=cL.slice(0,cL.lastIndexOf("/")+1);cT(cL.replace(cN,"")+".js")}else{var ct=cR(cy.src);Z.baseUrl=ct.slice(0,ct.lastIndexOf("/")+1)}};var ak=[],Q;var R=function(ap){Q=true;if(o){bS["domReady!"].state=4;o.checkDeps()}while(ap=ak.shift()){ap(avalon)}};if(bK.readyState==="complete"){setTimeout(R)}else{bK.addEventListener("DOMContentLoaded",R)}bs.addEventListener("load",R);avalon.ready=function(ap){if(!Q){ak.push(ap)}else{ap(avalon)}};avalon.config({loader:true});avalon.ready(function(){avalon.scan(bK.body)});new function(){var cC=navigator.userAgent;var cE=cC.indexOf("Android")>0;var cx=/iP(ad|hone|od)/.test(cC);var cG=ck.on;var cB={};var cy=navigator.pointerEnabled;var ct=navigator.msPointerEnabled;var ap=(function(){var cI=cx||false;try{var cL=document.createElement("div");cL.ontouchstart=function(){cI=true};var cK=document.createEvent("TouchEvent");cK.initUIEvent("touchstart",true,true);cL.dispatchEvent(cK)}catch(cJ){}cL=cL.ontouchstart=null;return cI})();var cv=!!(ap||cy||ct);var cw=["mousedown","mousemove","mouseup",""];if(ap){cw=["touchstart","touchmove","touchend","touchcancel"]}else{if(cy){cw=["pointerdown","pointermove","pointerup","pointercancel"]}else{if(ct){cw=["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"]}}}var cr,cA;function cs(cJ,cI,cL,cK){return Math.abs(cJ-cI)>=Math.abs(cL-cK)?(cJ-cI>0?"left":"right"):(cL-cK>0?"up":"down")}function cu(cI){var cK=cI.touches&&cI.touches.length?cI.touches:[cI];var cJ=cI.changedTouches?cI.changedTouches[0]:cK[0];return{x:cJ.clientX,y:cJ.clientY}}function cH(cK,cI,cJ){var cL=document.createEvent("Events");cL.initEvent(cI,true,true);cL.fireByAvalon=true;if(cJ){cL.detail=cJ}cK.dispatchEvent(cL)}function cq(cI){if(cI.fireByAvalon){return true}if(cB.element){if(cI.stopImmediatePropagation){cI.stopImmediatePropagation()}else{cI.propagationStopped=true}cI.stopPropagation();cI.preventDefault();if(cI.type==="click"){cB.element=null}return true}}function cF(){if(cA){clearTimeout(cA)}cA=null}function cD(cK){var cJ=cB.element;if(!cJ){return}cF();var cN=cu(cK);var cP=Math.abs(cB.x-cN.x);var cM=Math.abs(cB.y-cN.y);if(cP>30||cM>30){var cL=cs(cB.x,cN.x,cB.y,cN.y);var cI={direction:cL};cH(cJ,"swipe",cI);cH(cJ,"swipe"+cL,cI);cB={};cB.element=cJ}else{if(cz.canClick(cJ)&&cB.mx<cz.dragDistance&&cB.my<cz.dragDistance){if(document.activeElement&&document.activeElement!==cJ){document.activeElement.blur()}var cO;if(cJ.tagName.toLowerCase()==="label"){cO=cJ.htmlFor?document.getElementById(cJ.htmlFor):null}if(cO){cz.focus(cO)}else{cz.focus(cJ)}cK.preventDefault();cH(cJ,"tap");avalon.fastclick.fireEvent(cJ,"click",cK);if(cB.isDoubleTap){cH(cJ,"doubletap");avalon.fastclick.fireEvent(cJ,"dblclick",cK);cB={};cB.element=cJ}else{cr=setTimeout(function(){clearTimeout(cr);cr=null;if(cB.element){cB={};cB.element=cJ}},250)}}}avalon(cJ).removeClass(cz.activeClass)}document.addEventListener("mousedown",cq,true);document.addEventListener("click",cq,true);document.addEventListener(cw[1],function(cJ){var cI=cB.element;if(!cI){return}cF();var cK=cu(cJ);cB.mx+=Math.abs(cB.x-cK.x);cB.my+=Math.abs(cB.y-cK.y);if(cB.tapping&&(cB.mx>cz.dragDistance||cB.my>cz.dragDistance)){if(!~cB.events.indexOf("swipeleft")&&!~cB.events.indexOf("swiperight")){cB.element=null;avalon(cI).removeClass(cz.activeClass)}}});document.addEventListener(cw[2],cD);if(cw[3]){document.addEventListener(cw[3],function(){if(cA){clearTimeout(cA)}if(cr){clearTimeout(cr)}cA=cr=null;cB={}})}cG["clickHook"]=function(cJ){function cK(cN){var cM=cJ.element,cL=Date.now(),cO=cL-(cB.last||cL);avalon.mix(cB,cu(cN));cB.events=cM.events;cB.mx=0;cB.my=0;cB.tapping=cB.events.some(function(cQ,cP){return/click|tap|hold|longtap$/.test(cQ)});if(cO>0&&cO<=250){cB.isDoubleTap=true}cB.last=cL;cB.element=cM;cA=setTimeout(function(){cA=null;cH(cM,"hold");cH(cM,"longtap");cB={};avalon(cM).removeClass(cz.activeClass)},cz.clickDuration);if(cB.tapping&&avalon.fastclick.canClick(cM)){avalon(cM).addClass(cz.activeClass)}}function cI(cL){return cL==="click"}if(cI(cJ.param)?cv:true){cJ.specialBind=function(cL,cM){if(!cL.bindStart){cL.bindStart=true;cL.events=[cJ.param];cL.addEventListener(cw[0],cK)}else{avalon.Array.ensure(cL.events,cJ.param)}cJ.msCallback=cM;avalon.bind(cL,cJ.param,cM)};cJ.specialUnbind=function(){element.removeEventListener(cw[0],cK);avalon.unbind(cJ.element,cJ.param,cJ.msCallback)}}};if(cv){cG[cw[0]+"Hook"]=function(cI){if(needFixClick(cI.param)?cv:true){cI.specialBind=function(cK,cL){var cJ=cL;cL=function(cM){cB.element=cI.element;cJ.call(this,cM)};cI.msCallback=cL;avalon.bind(cK,cI.param,cL)};cI.specialUnbind=function(){avalon.unbind(cI.element,cI.param,cI.msCallback)}}};cG[cw[2]+"Hook"]=function(cI){if(needFixClick(cI.param)?cv:true){cI.specialBind=function(cK,cL){var cJ=cL;cL=function(cM){cB.element=cI.element;cJ.call(this,cM)};cI.msCallback=cL;avalon.bind(cK,cI.param,cL)};cI.specialUnbind=function(){avalon.unbind(cI.element,cI.param,cI.msCallback)}}}}var cz=avalon.fastclick={activeClass:"ms-click-active",clickDuration:750,dragDistance:30,fireEvent:function(cJ,cK,cL){var cI=document.createEvent("MouseEvents");cI.initMouseEvent(cK,true,true,bs,1,cL.screenX,cL.screenY,cL.clientX,cL.clientY,false,false,false,false,0,null);Object.defineProperty(cI,"fireByAvalon",{value:true});cJ.dispatchEvent(cI)},focus:function(cJ){if(this.canFocus(cJ)){var cI=cJ.value;cJ.value=cI;if(cx&&cJ.setSelectionRange&&cJ.type.indexOf("date")!==0&&cJ.type!=="time"){var cK=cI.length;cJ.setSelectionRange(cK,cK)}else{cJ.focus()}}},canClick:function(cI){switch(cI.nodeName.toLowerCase()){case"textarea":case"select":case"input":return !cI.disabled;default:return true}},canFocus:function(cI){switch(cI.nodeName.toLowerCase()){case"textarea":return true;case"select":return !cE;case"input":switch(cI.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !cI.disabled&&!cI.readOnly;default:return false}}};["swipe","swipeleft","swiperight","swipeup","swipedown","doubletap","tap","dblclick","longtap","hold"].forEach(function(cI){cG[cI+"Hook"]=cG["clickHook"]})};if(typeof define==="function"&&define.amd){define("avalon",[],function(){return avalon})}var ad=bs.avalon;avalon.noConflict=function(ap){if(ap&&bs.avalon===avalon){bs.avalon=ad}return avalon};if(aB===void 0){bs.avalon=avalon}return avalon}));